<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:p="http://primefaces.org/ui">

        <h:head>
                <title>Tech Equations - Header</title>
                <style>
                        .header-wrapper {
                                width: 100%;
                                background-color: #fff;
                                padding: 1% 5%;
                        }

                        .header-container {
                                display: flex;
                                align-items: center;
                                justify-content: space-between;
                                flex-wrap: wrap;
                        }

                        .tech-equations {
                                display: flex;
                                align-items: center;
                                margin-left: 2rem;
                                flex: 1;
                        }

                        .logo {
                                width: 70px;
                                height: 70px;
                                object-fit: contain;
                        }

                        .text-wrapper-1 {
                                font-size: 2rem;
                                font-weight: 1000;
                                color: #0e4270;
                                padding-left: 10px;
                        }

                        .text-wrapper-2 {
                                font-size: 2rem;
                                font-weight: 600;
                                color: #73d2f3;
                        }

                        .right-section {
                                display: flex;
                                align-items: center;
                                gap: 1rem;
                        }

                        .login-btn, .avatar {
                                background: #73d2f3;
                                border:#0e4270;
                                color: black;
                                font-size: 1rem;
                                cursor: pointer;padding: 10px 20px;
                                border-radius: 20px;
                                font-family: Helvetica;
                                font-weight: bold;
                        }

                        .avatar {
                                width: 50px;
                                height: 50px;
                                filter: drop-shadow(0 0 5px #73d2f3);
                                position: relative;
                                background-color: black;
                                color: white;
                                font-size: 1.5rem;
                                border-radius: 50%;
                                display: flex;
                                justify-content: center;
                                align-items: center;
                                text-transform: uppercase;
                        }

                        .dropdown {
                                display: none;
                                position: absolute;
                                top: 40px;
                                right: 0;
                                background: #eee;
                                border: 1px solid #ccc;
                                border-radius: 5px;
                                overflow: hidden;
                                z-index: 1000;
                        }

                        .dropdown a {
                                display: block;
                                padding: 0.5rem 1rem;
                                color: black;
                                text-decoration: none;
                        }

                        .dropdown a:hover {
                                background-color: #ddd;
                        }

                        .avatar img {
                                width: 100%;
                                height: 100%;
                                border-radius: 50%;
                        }

                </style>
        </h:head>

        <h:body>
                <div class="header-wrapper">
                        <div class="header-container">
                                <div class="tech-equations">
                                        <p:graphicImage value="#{resource['images/v107_16.png']}" styleClass="logo" />
                                        <div class="text-wrapper-1">Tech</div>
                                        <div class="text-wrapper-2">Equations</div>
                                </div>

                                <div class="right-section">
                                        <!-- Display login button if no user is logged in -->
                                        <h:panelGroup rendered="#{userSessionBean.loggedInUser == null}" id="loginBtnContainer">
                                                <button class="login-btn" id="loginBtn" onclick="window.location.href='../public/login.xhtml'">Login</button>
                                        </h:panelGroup>

                                        <!-- Display avatar and dropdown menu if user is logged in -->
                                        <h:panelGroup rendered="#{userSessionBean.loggedInUser != null}" id="avatarBox">
                                                <div class="avatar" onclick="toggleDropdown()">
                                                        <h:outputText value="#{userSessionBean.firstLetter}" />
                                                </div>
                                                <div class="dropdown" id="dropdownMenu">
                                                        <a href="#">Profile</a>
                                                        <a href="#{userSessionBean.logout()}">Logout</a>
                                                </div>
                                        </h:panelGroup>
                                </div>
                        </div>
                </div>

                <script>
                        function toggleDropdown() {
                                document.getElementById('dropdownMenu').classList.toggle('show');
                        }

                        window.addEventListener('click', (e) => {
                                if (!e.target.closest('.avatar')) {
                                        document.getElementById('dropdownMenu').classList.remove('show');
                                }
                        });
                </script>
        </h:body>
</ui:composition>
